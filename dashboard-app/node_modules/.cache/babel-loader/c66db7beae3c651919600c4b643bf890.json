{"ast":null,"code":"import 'core-js/modules/es6.array.map';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport 'core-js/modules/es6.promise';\nimport 'core-js/modules/web.dom.iterable';\nimport 'core-js/modules/es6.array.iterator';\nimport 'core-js/modules/es6.object.to-string';\nimport 'core-js/modules/es6.string.iterator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { func, object, any, bool } from 'prop-types';\nimport { equals, toPairs, fromPairs } from 'ramda';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _objectSpread2 from '@babel/runtime/helpers/objectSpread';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport 'core-js/modules/es6.array.filter';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport 'core-js/modules/es6.function.name';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\n\nvar isQueryPresent = function (query) {\n  return query.measures && query.measures.length || query.dimensions && query.dimensions.length || query.timeDimensions && query.timeDimensions.length;\n};\n\nvar CubeContext = createContext(null);\n\nvar QueryRenderer = /*#__PURE__*/function (_React$Component) {\n  _inherits(QueryRenderer, _React$Component);\n\n  _createClass(QueryRenderer, null, [{\n    key: \"isQueryPresent\",\n    value: function isQueryPresent$$1(query) {\n      return isQueryPresent(query);\n    }\n  }]);\n\n  function QueryRenderer(props) {\n    var _this;\n\n    _classCallCheck(this, QueryRenderer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QueryRenderer).call(this, props));\n    _this.state = {};\n    _this.mutexObj = {};\n    return _this;\n  }\n\n  _createClass(QueryRenderer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          query = _this$props.query,\n          queries = _this$props.queries;\n\n      if (query) {\n        this.load(query);\n      }\n\n      if (queries) {\n        this.loadQueries(queries);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var _this$props2 = this.props,\n          query = _this$props2.query,\n          queries = _this$props2.queries,\n          render = _this$props2.render,\n          cubejsApi = _this$props2.cubejsApi,\n          loadSql = _this$props2.loadSql,\n          updateOnlyOnStateChange = _this$props2.updateOnlyOnStateChange;\n\n      if (!updateOnlyOnStateChange) {\n        return true;\n      }\n\n      return !equals(nextProps.query, query) || !equals(nextProps.queries, queries) || (nextProps.render == null || render == null) && nextProps.render !== render || nextProps.cubejsApi !== cubejsApi || nextProps.loadSql !== loadSql || !equals(nextState, this.state) || nextProps.updateOnlyOnStateChange !== updateOnlyOnStateChange;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props3 = this.props,\n          query = _this$props3.query,\n          queries = _this$props3.queries;\n\n      if (!equals(prevProps.query, query)) {\n        this.load(query);\n      }\n\n      if (!equals(prevProps.queries, queries)) {\n        this.loadQueries(queries);\n      }\n    }\n  }, {\n    key: \"cubejsApi\",\n    value: function cubejsApi() {\n      // eslint-disable-next-line react/destructuring-assignment\n      return this.props.cubejsApi || this.context && this.context.cubejsApi;\n    }\n  }, {\n    key: \"load\",\n    value: function load(query) {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true,\n        resultSet: null,\n        error: null,\n        sqlQuery: null\n      });\n      var loadSql = this.props.loadSql;\n      var cubejsApi = this.cubejsApi();\n\n      if (query && QueryRenderer.isQueryPresent(query)) {\n        if (loadSql === 'only') {\n          cubejsApi.sql(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'sql'\n          }).then(function (sqlQuery) {\n            return _this2.setState({\n              sqlQuery: sqlQuery,\n              error: null,\n              isLoading: false\n            });\n          })[\"catch\"](function (error) {\n            return _this2.setState({\n              resultSet: null,\n              error: error,\n              isLoading: false\n            });\n          });\n        } else if (loadSql) {\n          Promise.all([cubejsApi.sql(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'sql'\n          }), cubejsApi.load(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'query'\n          })]).then(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                sqlQuery = _ref2[0],\n                resultSet = _ref2[1];\n\n            return _this2.setState({\n              sqlQuery: sqlQuery,\n              resultSet: resultSet,\n              error: null,\n              isLoading: false\n            });\n          })[\"catch\"](function (error) {\n            return _this2.setState({\n              resultSet: null,\n              error: error,\n              isLoading: false\n            });\n          });\n        } else {\n          cubejsApi.load(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'query'\n          }).then(function (resultSet) {\n            return _this2.setState({\n              resultSet: resultSet,\n              error: null,\n              isLoading: false\n            });\n          })[\"catch\"](function (error) {\n            return _this2.setState({\n              resultSet: null,\n              error: error,\n              isLoading: false\n            });\n          });\n        }\n      }\n    }\n  }, {\n    key: \"loadQueries\",\n    value: function loadQueries(queries) {\n      var _this3 = this;\n\n      var cubejsApi = this.cubejsApi();\n      this.setState({\n        isLoading: true,\n        resultSet: null,\n        error: null\n      });\n      var resultPromises = Promise.all(toPairs(queries).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            name = _ref4[0],\n            query = _ref4[1];\n\n        return cubejsApi.load(query, {\n          mutexObj: _this3.mutexObj,\n          mutexKey: name\n        }).then(function (r) {\n          return [name, r];\n        });\n      }));\n      resultPromises.then(function (resultSet) {\n        return _this3.setState({\n          resultSet: fromPairs(resultSet),\n          error: null,\n          isLoading: false\n        });\n      })[\"catch\"](function (error) {\n        return _this3.setState({\n          resultSet: null,\n          error: error,\n          isLoading: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          queries = _this$state.queries,\n          resultSet = _this$state.resultSet,\n          isLoading = _this$state.isLoading,\n          sqlQuery = _this$state.sqlQuery;\n      var render = this.props.render;\n      var loadState = {\n        error: error,\n        resultSet: queries ? resultSet || {} : resultSet,\n        loadingState: {\n          isLoading: isLoading\n        },\n        sqlQuery: sqlQuery\n      };\n\n      if (render) {\n        return render(loadState);\n      }\n\n      return null;\n    }\n  }]);\n\n  return QueryRenderer;\n}(React.Component);\n\nQueryRenderer.contextType = CubeContext;\nQueryRenderer.propTypes = {\n  render: func,\n  cubejsApi: object,\n  query: object,\n  queries: object,\n  loadSql: any,\n  updateOnlyOnStateChange: bool\n};\nQueryRenderer.defaultProps = {\n  cubejsApi: null,\n  query: null,\n  render: null,\n  queries: null,\n  loadSql: null,\n  updateOnlyOnStateChange: false\n};\n\nvar QueryRendererWithTotals = function QueryRendererWithTotals(_ref) {\n  var query = _ref.query,\n      restProps = _objectWithoutProperties(_ref, [\"query\"]);\n\n  return React.createElement(QueryRenderer, _extends({\n    queries: {\n      totals: _objectSpread2({}, query, {\n        dimensions: [],\n        timeDimensions: query.timeDimensions ? query.timeDimensions.map(function (td) {\n          return _objectSpread2({}, td, {\n            granularity: null\n          });\n        }) : undefined\n      }),\n      main: query\n    }\n  }, restProps));\n};\n\nQueryRendererWithTotals.propTypes = {\n  render: func,\n  cubejsApi: object.isRequired,\n  query: object,\n  queries: object,\n  loadSql: any\n};\nQueryRendererWithTotals.defaultProps = {\n  query: null,\n  render: null,\n  queries: null,\n  loadSql: null\n};\n\nvar QueryBuilder = /*#__PURE__*/function (_React$Component) {\n  _inherits(QueryBuilder, _React$Component);\n\n  function QueryBuilder(props) {\n    var _this;\n\n    _classCallCheck(this, QueryBuilder);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QueryBuilder).call(this, props));\n    _this.state = _objectSpread2({\n      query: props.query,\n      chartType: 'line'\n    }, props.vizState);\n    return _this;\n  }\n\n  _createClass(QueryBuilder, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var meta;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.cubejsApi().meta();\n\n              case 2:\n                meta = _context.sent;\n                this.setState({\n                  meta: meta\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          query = _this$props.query,\n          vizState = _this$props.vizState;\n\n      if (!equals(prevProps.query, query)) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          query: query\n        });\n      }\n\n      if (!equals(prevProps.vizState, vizState)) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState(vizState);\n      }\n    }\n  }, {\n    key: \"cubejsApi\",\n    value: function cubejsApi() {\n      var cubejsApi = this.props.cubejsApi; // eslint-disable-next-line react/destructuring-assignment\n\n      return cubejsApi || this.context && this.context.cubejsApi;\n    }\n  }, {\n    key: \"isQueryPresent\",\n    value: function isQueryPresent() {\n      var query = this.state.query;\n      return QueryRenderer.isQueryPresent(query);\n    }\n  }, {\n    key: \"prepareRenderProps\",\n    value: function prepareRenderProps(queryRendererProps) {\n      var _this2 = this;\n\n      var getName = function getName(member) {\n        return member.name;\n      };\n\n      var toTimeDimension = function toTimeDimension(member) {\n        return {\n          dimension: member.dimension.name,\n          granularity: member.granularity,\n          dateRange: member.dateRange\n        };\n      };\n\n      var toFilter = function toFilter(member) {\n        return {\n          dimension: member.dimension.name,\n          operator: member.operator,\n          values: member.values\n        };\n      };\n\n      var updateMethods = function updateMethods(memberType) {\n        var toQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getName;\n        return {\n          add: function add(member) {\n            var query = _this2.state.query;\n\n            _this2.updateQuery(_defineProperty({}, memberType, (query[memberType] || []).concat(toQuery(member))));\n          },\n          remove: function remove(member) {\n            var query = _this2.state.query;\n            var members = (query[memberType] || []).concat([]);\n            members.splice(member.index, 1);\n            return _this2.updateQuery(_defineProperty({}, memberType, members));\n          },\n          update: function update(member, updateWith) {\n            var query = _this2.state.query;\n            var members = (query[memberType] || []).concat([]);\n            members.splice(member.index, 1, toQuery(updateWith));\n            return _this2.updateQuery(_defineProperty({}, memberType, members));\n          }\n        };\n      };\n\n      var granularities = [{\n        name: undefined,\n        title: 'w/o grouping'\n      }, {\n        name: 'hour',\n        title: 'Hour'\n      }, {\n        name: 'day',\n        title: 'Day'\n      }, {\n        name: 'week',\n        title: 'Week'\n      }, {\n        name: 'month',\n        title: 'Month'\n      }, {\n        name: 'year',\n        title: 'Year'\n      }];\n      var _this$state = this.state,\n          meta = _this$state.meta,\n          query = _this$state.query,\n          chartType = _this$state.chartType;\n      return _objectSpread2({\n        meta: meta,\n        query: query,\n        validatedQuery: this.validatedQuery(),\n        isQueryPresent: this.isQueryPresent(),\n        chartType: chartType,\n        measures: (meta && query.measures || []).map(function (m, i) {\n          return _objectSpread2({\n            index: i\n          }, meta.resolveMember(m, 'measures'));\n        }),\n        dimensions: (meta && query.dimensions || []).map(function (m, i) {\n          return _objectSpread2({\n            index: i\n          }, meta.resolveMember(m, 'dimensions'));\n        }),\n        segments: (meta && query.segments || []).map(function (m, i) {\n          return _objectSpread2({\n            index: i\n          }, meta.resolveMember(m, 'segments'));\n        }),\n        timeDimensions: (meta && query.timeDimensions || []).map(function (m, i) {\n          return _objectSpread2({}, m, {\n            dimension: _objectSpread2({}, meta.resolveMember(m.dimension, 'dimensions'), {\n              granularities: granularities\n            }),\n            index: i\n          });\n        }),\n        filters: (meta && query.filters || []).map(function (m, i) {\n          return _objectSpread2({}, m, {\n            dimension: meta.resolveMember(m.dimension, ['dimensions', 'measures']),\n            operators: meta.filterOperatorsForMember(m.dimension, ['dimensions', 'measures']),\n            index: i\n          });\n        }),\n        availableMeasures: meta && meta.membersForQuery(query, 'measures') || [],\n        availableDimensions: meta && meta.membersForQuery(query, 'dimensions') || [],\n        availableTimeDimensions: (meta && meta.membersForQuery(query, 'dimensions') || []).filter(function (m) {\n          return m.type === 'time';\n        }),\n        availableSegments: meta && meta.membersForQuery(query, 'segments') || [],\n        updateMeasures: updateMethods('measures'),\n        updateDimensions: updateMethods('dimensions'),\n        updateSegments: updateMethods('segments'),\n        updateTimeDimensions: updateMethods('timeDimensions', toTimeDimension),\n        updateFilters: updateMethods('filters', toFilter),\n        updateChartType: function updateChartType(newChartType) {\n          return _this2.updateVizState({\n            chartType: newChartType\n          });\n        }\n      }, queryRendererProps);\n    }\n  }, {\n    key: \"updateQuery\",\n    value: function updateQuery(queryUpdate) {\n      var query = this.state.query;\n      this.updateVizState({\n        query: _objectSpread2({}, query, {}, queryUpdate)\n      });\n    }\n  }, {\n    key: \"updateVizState\",\n    value: function updateVizState(state) {\n      var _this$props2 = this.props,\n          setQuery = _this$props2.setQuery,\n          setVizState = _this$props2.setVizState;\n      var finalState = this.applyStateChangeHeuristics(state);\n      this.setState(finalState);\n      finalState = _objectSpread2({}, this.state, {}, finalState);\n\n      if (setQuery) {\n        setQuery(finalState.query);\n      }\n\n      if (setVizState) {\n        var _finalState = finalState,\n            meta = _finalState.meta,\n            toSet = _objectWithoutProperties(_finalState, [\"meta\"]);\n\n        setVizState(toSet);\n      }\n    }\n  }, {\n    key: \"validatedQuery\",\n    value: function validatedQuery() {\n      var query = this.state.query;\n      return _objectSpread2({}, query, {\n        filters: (query.filters || []).filter(function (f) {\n          return f.operator;\n        })\n      });\n    }\n  }, {\n    key: \"defaultHeuristics\",\n    value: function defaultHeuristics(newState) {\n      var _this$state2 = this.state,\n          query = _this$state2.query,\n          sessionGranularity = _this$state2.sessionGranularity;\n      var defaultGranularity = sessionGranularity || 'day';\n\n      if (newState.query) {\n        var oldQuery = query;\n        var newQuery = newState.query;\n        var meta = this.state.meta;\n\n        if ((oldQuery.timeDimensions || []).length === 1 && (newQuery.timeDimensions || []).length === 1 && newQuery.timeDimensions[0].granularity && oldQuery.timeDimensions[0].granularity !== newQuery.timeDimensions[0].granularity) {\n          newState = _objectSpread2({}, newState, {\n            sessionGranularity: newQuery.timeDimensions[0].granularity\n          });\n        }\n\n        if ((oldQuery.measures || []).length === 0 && (newQuery.measures || []).length > 0 || (oldQuery.measures || []).length === 1 && (newQuery.measures || []).length === 1 && oldQuery.measures[0] !== newQuery.measures[0]) {\n          var defaultTimeDimension = meta.defaultTimeDimensionNameFor(newQuery.measures[0]);\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: defaultTimeDimension ? [{\n              dimension: defaultTimeDimension,\n              granularity: defaultGranularity\n            }] : []\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            chartType: defaultTimeDimension ? 'line' : 'number'\n          });\n        }\n\n        if ((oldQuery.dimensions || []).length === 0 && (newQuery.dimensions || []).length > 0) {\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: (newQuery.timeDimensions || []).map(function (td) {\n              return _objectSpread2({}, td, {\n                granularity: undefined\n              });\n            })\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            chartType: 'table'\n          });\n        }\n\n        if ((oldQuery.dimensions || []).length > 0 && (newQuery.dimensions || []).length === 0) {\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: (newQuery.timeDimensions || []).map(function (td) {\n              return _objectSpread2({}, td, {\n                granularity: td.granularity || defaultGranularity\n              });\n            })\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            chartType: (newQuery.timeDimensions || []).length ? 'line' : 'number'\n          });\n        }\n\n        if (((oldQuery.dimensions || []).length > 0 || (oldQuery.measures || []).length > 0) && (newQuery.dimensions || []).length === 0 && (newQuery.measures || []).length === 0) {\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: [],\n            filters: []\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            sessionGranularity: null\n          });\n        }\n\n        return newState;\n      }\n\n      if (newState.chartType) {\n        var newChartType = newState.chartType;\n\n        if ((newChartType === 'line' || newChartType === 'area') && (query.timeDimensions || []).length === 1 && !query.timeDimensions[0].granularity) {\n          var _query$timeDimensions = _slicedToArray(query.timeDimensions, 1),\n              td = _query$timeDimensions[0];\n\n          return _objectSpread2({}, newState, {\n            query: _objectSpread2({}, query, {\n              timeDimensions: [_objectSpread2({}, td, {\n                granularity: defaultGranularity\n              })]\n            })\n          });\n        }\n\n        if ((newChartType === 'pie' || newChartType === 'table' || newChartType === 'number') && (query.timeDimensions || []).length === 1 && query.timeDimensions[0].granularity) {\n          var _query$timeDimensions2 = _slicedToArray(query.timeDimensions, 1),\n              _td = _query$timeDimensions2[0];\n\n          return _objectSpread2({}, newState, {\n            query: _objectSpread2({}, query, {\n              timeDimensions: [_objectSpread2({}, _td, {\n                granularity: undefined\n              })]\n            })\n          });\n        }\n      }\n\n      return newState;\n    }\n  }, {\n    key: \"applyStateChangeHeuristics\",\n    value: function applyStateChangeHeuristics(newState) {\n      var _this$props3 = this.props,\n          stateChangeHeuristics = _this$props3.stateChangeHeuristics,\n          disableHeuristics = _this$props3.disableHeuristics;\n\n      if (disableHeuristics) {\n        return newState;\n      }\n\n      return stateChangeHeuristics && stateChangeHeuristics(this.state, newState) || this.defaultHeuristics(newState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props4 = this.props,\n          cubejsApi = _this$props4.cubejsApi,\n          _render = _this$props4.render,\n          wrapWithQueryRenderer = _this$props4.wrapWithQueryRenderer;\n\n      if (wrapWithQueryRenderer) {\n        return React.createElement(QueryRenderer, {\n          query: this.validatedQuery(),\n          cubejsApi: cubejsApi,\n          render: function render(queryRendererProps) {\n            if (_render) {\n              return _render(_this3.prepareRenderProps(queryRendererProps));\n            }\n\n            return null;\n          }\n        });\n      } else {\n        if (_render) {\n          return _render(this.prepareRenderProps());\n        }\n\n        return null;\n      }\n    }\n  }]);\n\n  return QueryBuilder;\n}(React.Component);\n\nQueryBuilder.contextType = CubeContext;\nQueryBuilder.propTypes = {\n  render: func,\n  stateChangeHeuristics: func,\n  setQuery: func,\n  setVizState: func,\n  cubejsApi: object,\n  disableHeuristics: bool,\n  wrapWithQueryRenderer: bool,\n  query: object,\n  vizState: object\n};\nQueryBuilder.defaultProps = {\n  cubejsApi: null,\n  query: {},\n  setQuery: null,\n  setVizState: null,\n  stateChangeHeuristics: null,\n  disableHeuristics: false,\n  render: null,\n  wrapWithQueryRenderer: true,\n  vizState: {}\n};\n\nvar CubeProvider = function CubeProvider(_ref) {\n  var cubejsApi = _ref.cubejsApi,\n      children = _ref.children;\n  return React.createElement(CubeContext.Provider, {\n    value: {\n      cubejsApi: cubejsApi\n    }\n  }, children);\n};\n\nCubeProvider.propTypes = {\n  cubejsApi: object.isRequired,\n  children: any.isRequired\n};\n\nvar useCubeQuery = function (query) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 1),\n      mutexObj = _useState2[0];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentQuery = _useState4[0],\n      setCurrentQuery = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      resultSet = _useState8[0],\n      setResultSet = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var context = useContext(CubeContext);\n  var subscribeRequest = null;\n  useEffect(function () {\n    function loadQuery() {\n      return _loadQuery.apply(this, arguments);\n    }\n\n    function _loadQuery() {\n      _loadQuery = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var cubejsApi;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(query && isQueryPresent(query))) {\n                  _context.next = 25;\n                  break;\n                }\n\n                if (!equals(currentQuery, query)) {\n                  setResultSet(null);\n                  setError(null);\n                  setCurrentQuery(query);\n                }\n\n                setLoading(true);\n                _context.prev = 3;\n\n                if (!subscribeRequest) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 7;\n                return subscribeRequest.unsubscribe();\n\n              case 7:\n                subscribeRequest = null;\n\n              case 8:\n                cubejsApi = options.cubejsApi || context && context.cubejsApi;\n\n                if (!options.subscribe) {\n                  _context.next = 13;\n                  break;\n                }\n\n                subscribeRequest = cubejsApi.subscribe(query, {\n                  mutexObj: mutexObj,\n                  mutexKey: 'query'\n                }, function (e, result) {\n                  setLoading(false);\n\n                  if (e) {\n                    setError(e);\n                  } else {\n                    setResultSet(result);\n                  }\n                });\n                _context.next = 19;\n                break;\n\n              case 13:\n                _context.t0 = setResultSet;\n                _context.next = 16;\n                return cubejsApi.load(query, {\n                  mutexObj: mutexObj,\n                  mutexKey: 'query'\n                });\n\n              case 16:\n                _context.t1 = _context.sent;\n                (0, _context.t0)(_context.t1);\n                setLoading(false);\n\n              case 19:\n                _context.next = 25;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t2 = _context[\"catch\"](3);\n                setError(_context.t2);\n                setLoading(false);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 21]]);\n      }));\n      return _loadQuery.apply(this, arguments);\n    }\n\n    loadQuery();\n    return function () {\n      if (subscribeRequest) {\n        subscribeRequest.unsubscribe();\n        subscribeRequest = null;\n      }\n    };\n  }, [JSON.stringify(query), options.cubejsApi, context]);\n  return {\n    isLoading: isLoading,\n    resultSet: resultSet,\n    error: error\n  };\n};\n\nexport { QueryRenderer, QueryRendererWithTotals, QueryBuilder, isQueryPresent, CubeProvider, useCubeQuery };","map":{"version":3,"sources":["/home/syb234/dashboard/dashboard-backend/dashboard-app/node_modules/@cubejs-client/react/dist/cubejs-client-react.esm.js"],"names":["_slicedToArray","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","_createClass","_inherits","React","createContext","useState","useContext","useEffect","func","object","any","bool","equals","toPairs","fromPairs","_extends","_objectSpread2","_objectWithoutProperties","_defineProperty","_regeneratorRuntime","_asyncToGenerator","isQueryPresent","query","measures","length","dimensions","timeDimensions","CubeContext","QueryRenderer","_React$Component","key","value","isQueryPresent$$1","props","_this","call","state","mutexObj","componentDidMount","_this$props","queries","load","loadQueries","shouldComponentUpdate","nextProps","nextState","_this$props2","render","cubejsApi","loadSql","updateOnlyOnStateChange","componentDidUpdate","prevProps","_this$props3","context","_this2","setState","isLoading","resultSet","error","sqlQuery","sql","mutexKey","then","Promise","all","_ref","_ref2","_this3","resultPromises","map","_ref3","_ref4","name","r","_this$state","loadState","loadingState","Component","contextType","propTypes","defaultProps","QueryRendererWithTotals","restProps","createElement","totals","td","granularity","undefined","main","isRequired","QueryBuilder","chartType","vizState","_componentDidMount","mark","_callee","meta","wrap","_callee$","_context","prev","next","sent","stop","apply","arguments","prepareRenderProps","queryRendererProps","getName","member","toTimeDimension","dimension","dateRange","toFilter","operator","values","updateMethods","memberType","toQuery","add","updateQuery","concat","remove","members","splice","index","update","updateWith","granularities","title","validatedQuery","m","i","resolveMember","segments","filters","operators","filterOperatorsForMember","availableMeasures","membersForQuery","availableDimensions","availableTimeDimensions","filter","type","availableSegments","updateMeasures","updateDimensions","updateSegments","updateTimeDimensions","updateFilters","updateChartType","newChartType","updateVizState","queryUpdate","setQuery","setVizState","finalState","applyStateChangeHeuristics","_finalState","toSet","f","defaultHeuristics","newState","_this$state2","sessionGranularity","defaultGranularity","oldQuery","newQuery","defaultTimeDimension","defaultTimeDimensionNameFor","_query$timeDimensions","_query$timeDimensions2","_td","stateChangeHeuristics","disableHeuristics","_this$props4","_render","wrapWithQueryRenderer","CubeProvider","children","Provider","useCubeQuery","options","_useState","_useState2","_useState3","_useState4","currentQuery","setCurrentQuery","_useState5","_useState6","setLoading","_useState7","_useState8","setResultSet","_useState9","_useState10","setError","subscribeRequest","loadQuery","_loadQuery","unsubscribe","subscribe","e","result","t0","t1","t2","JSON","stringify"],"mappings":"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","sourcesContent":["import 'core-js/modules/es6.array.map';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport 'core-js/modules/es6.promise';\nimport 'core-js/modules/web.dom.iterable';\nimport 'core-js/modules/es6.array.iterator';\nimport 'core-js/modules/es6.object.to-string';\nimport 'core-js/modules/es6.string.iterator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { func, object, any, bool } from 'prop-types';\nimport { equals, toPairs, fromPairs } from 'ramda';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _objectSpread2 from '@babel/runtime/helpers/objectSpread';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport 'core-js/modules/es6.array.filter';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport 'core-js/modules/es6.function.name';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport 'regenerator-runtime/runtime';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\n\nvar isQueryPresent = (function (query) {\n  return query.measures && query.measures.length || query.dimensions && query.dimensions.length || query.timeDimensions && query.timeDimensions.length;\n});\n\nvar CubeContext = createContext(null);\n\nvar QueryRenderer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(QueryRenderer, _React$Component);\n\n  _createClass(QueryRenderer, null, [{\n    key: \"isQueryPresent\",\n    value: function isQueryPresent$$1(query) {\n      return isQueryPresent(query);\n    }\n  }]);\n\n  function QueryRenderer(props) {\n    var _this;\n\n    _classCallCheck(this, QueryRenderer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QueryRenderer).call(this, props));\n    _this.state = {};\n    _this.mutexObj = {};\n    return _this;\n  }\n\n  _createClass(QueryRenderer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          query = _this$props.query,\n          queries = _this$props.queries;\n\n      if (query) {\n        this.load(query);\n      }\n\n      if (queries) {\n        this.loadQueries(queries);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var _this$props2 = this.props,\n          query = _this$props2.query,\n          queries = _this$props2.queries,\n          render = _this$props2.render,\n          cubejsApi = _this$props2.cubejsApi,\n          loadSql = _this$props2.loadSql,\n          updateOnlyOnStateChange = _this$props2.updateOnlyOnStateChange;\n\n      if (!updateOnlyOnStateChange) {\n        return true;\n      }\n\n      return !equals(nextProps.query, query) || !equals(nextProps.queries, queries) || (nextProps.render == null || render == null) && nextProps.render !== render || nextProps.cubejsApi !== cubejsApi || nextProps.loadSql !== loadSql || !equals(nextState, this.state) || nextProps.updateOnlyOnStateChange !== updateOnlyOnStateChange;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props3 = this.props,\n          query = _this$props3.query,\n          queries = _this$props3.queries;\n\n      if (!equals(prevProps.query, query)) {\n        this.load(query);\n      }\n\n      if (!equals(prevProps.queries, queries)) {\n        this.loadQueries(queries);\n      }\n    }\n  }, {\n    key: \"cubejsApi\",\n    value: function cubejsApi() {\n      // eslint-disable-next-line react/destructuring-assignment\n      return this.props.cubejsApi || this.context && this.context.cubejsApi;\n    }\n  }, {\n    key: \"load\",\n    value: function load(query) {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true,\n        resultSet: null,\n        error: null,\n        sqlQuery: null\n      });\n      var loadSql = this.props.loadSql;\n      var cubejsApi = this.cubejsApi();\n\n      if (query && QueryRenderer.isQueryPresent(query)) {\n        if (loadSql === 'only') {\n          cubejsApi.sql(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'sql'\n          }).then(function (sqlQuery) {\n            return _this2.setState({\n              sqlQuery: sqlQuery,\n              error: null,\n              isLoading: false\n            });\n          })[\"catch\"](function (error) {\n            return _this2.setState({\n              resultSet: null,\n              error: error,\n              isLoading: false\n            });\n          });\n        } else if (loadSql) {\n          Promise.all([cubejsApi.sql(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'sql'\n          }), cubejsApi.load(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'query'\n          })]).then(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                sqlQuery = _ref2[0],\n                resultSet = _ref2[1];\n\n            return _this2.setState({\n              sqlQuery: sqlQuery,\n              resultSet: resultSet,\n              error: null,\n              isLoading: false\n            });\n          })[\"catch\"](function (error) {\n            return _this2.setState({\n              resultSet: null,\n              error: error,\n              isLoading: false\n            });\n          });\n        } else {\n          cubejsApi.load(query, {\n            mutexObj: this.mutexObj,\n            mutexKey: 'query'\n          }).then(function (resultSet) {\n            return _this2.setState({\n              resultSet: resultSet,\n              error: null,\n              isLoading: false\n            });\n          })[\"catch\"](function (error) {\n            return _this2.setState({\n              resultSet: null,\n              error: error,\n              isLoading: false\n            });\n          });\n        }\n      }\n    }\n  }, {\n    key: \"loadQueries\",\n    value: function loadQueries(queries) {\n      var _this3 = this;\n\n      var cubejsApi = this.cubejsApi();\n      this.setState({\n        isLoading: true,\n        resultSet: null,\n        error: null\n      });\n      var resultPromises = Promise.all(toPairs(queries).map(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            name = _ref4[0],\n            query = _ref4[1];\n\n        return cubejsApi.load(query, {\n          mutexObj: _this3.mutexObj,\n          mutexKey: name\n        }).then(function (r) {\n          return [name, r];\n        });\n      }));\n      resultPromises.then(function (resultSet) {\n        return _this3.setState({\n          resultSet: fromPairs(resultSet),\n          error: null,\n          isLoading: false\n        });\n      })[\"catch\"](function (error) {\n        return _this3.setState({\n          resultSet: null,\n          error: error,\n          isLoading: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          error = _this$state.error,\n          queries = _this$state.queries,\n          resultSet = _this$state.resultSet,\n          isLoading = _this$state.isLoading,\n          sqlQuery = _this$state.sqlQuery;\n      var render = this.props.render;\n      var loadState = {\n        error: error,\n        resultSet: queries ? resultSet || {} : resultSet,\n        loadingState: {\n          isLoading: isLoading\n        },\n        sqlQuery: sqlQuery\n      };\n\n      if (render) {\n        return render(loadState);\n      }\n\n      return null;\n    }\n  }]);\n\n  return QueryRenderer;\n}(React.Component);\nQueryRenderer.contextType = CubeContext;\nQueryRenderer.propTypes = {\n  render: func,\n  cubejsApi: object,\n  query: object,\n  queries: object,\n  loadSql: any,\n  updateOnlyOnStateChange: bool\n};\nQueryRenderer.defaultProps = {\n  cubejsApi: null,\n  query: null,\n  render: null,\n  queries: null,\n  loadSql: null,\n  updateOnlyOnStateChange: false\n};\n\nvar QueryRendererWithTotals = function QueryRendererWithTotals(_ref) {\n  var query = _ref.query,\n      restProps = _objectWithoutProperties(_ref, [\"query\"]);\n\n  return React.createElement(QueryRenderer, _extends({\n    queries: {\n      totals: _objectSpread2({}, query, {\n        dimensions: [],\n        timeDimensions: query.timeDimensions ? query.timeDimensions.map(function (td) {\n          return _objectSpread2({}, td, {\n            granularity: null\n          });\n        }) : undefined\n      }),\n      main: query\n    }\n  }, restProps));\n};\n\nQueryRendererWithTotals.propTypes = {\n  render: func,\n  cubejsApi: object.isRequired,\n  query: object,\n  queries: object,\n  loadSql: any\n};\nQueryRendererWithTotals.defaultProps = {\n  query: null,\n  render: null,\n  queries: null,\n  loadSql: null\n};\n\nvar QueryBuilder =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(QueryBuilder, _React$Component);\n\n  function QueryBuilder(props) {\n    var _this;\n\n    _classCallCheck(this, QueryBuilder);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QueryBuilder).call(this, props));\n    _this.state = _objectSpread2({\n      query: props.query,\n      chartType: 'line'\n    }, props.vizState);\n    return _this;\n  }\n\n  _createClass(QueryBuilder, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var meta;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.cubejsApi().meta();\n\n              case 2:\n                meta = _context.sent;\n                this.setState({\n                  meta: meta\n                });\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          query = _this$props.query,\n          vizState = _this$props.vizState;\n\n      if (!equals(prevProps.query, query)) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState({\n          query: query\n        });\n      }\n\n      if (!equals(prevProps.vizState, vizState)) {\n        // eslint-disable-next-line react/no-did-update-set-state\n        this.setState(vizState);\n      }\n    }\n  }, {\n    key: \"cubejsApi\",\n    value: function cubejsApi() {\n      var cubejsApi = this.props.cubejsApi; // eslint-disable-next-line react/destructuring-assignment\n\n      return cubejsApi || this.context && this.context.cubejsApi;\n    }\n  }, {\n    key: \"isQueryPresent\",\n    value: function isQueryPresent() {\n      var query = this.state.query;\n      return QueryRenderer.isQueryPresent(query);\n    }\n  }, {\n    key: \"prepareRenderProps\",\n    value: function prepareRenderProps(queryRendererProps) {\n      var _this2 = this;\n\n      var getName = function getName(member) {\n        return member.name;\n      };\n\n      var toTimeDimension = function toTimeDimension(member) {\n        return {\n          dimension: member.dimension.name,\n          granularity: member.granularity,\n          dateRange: member.dateRange\n        };\n      };\n\n      var toFilter = function toFilter(member) {\n        return {\n          dimension: member.dimension.name,\n          operator: member.operator,\n          values: member.values\n        };\n      };\n\n      var updateMethods = function updateMethods(memberType) {\n        var toQuery = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getName;\n        return {\n          add: function add(member) {\n            var query = _this2.state.query;\n\n            _this2.updateQuery(_defineProperty({}, memberType, (query[memberType] || []).concat(toQuery(member))));\n          },\n          remove: function remove(member) {\n            var query = _this2.state.query;\n            var members = (query[memberType] || []).concat([]);\n            members.splice(member.index, 1);\n            return _this2.updateQuery(_defineProperty({}, memberType, members));\n          },\n          update: function update(member, updateWith) {\n            var query = _this2.state.query;\n            var members = (query[memberType] || []).concat([]);\n            members.splice(member.index, 1, toQuery(updateWith));\n            return _this2.updateQuery(_defineProperty({}, memberType, members));\n          }\n        };\n      };\n\n      var granularities = [{\n        name: undefined,\n        title: 'w/o grouping'\n      }, {\n        name: 'hour',\n        title: 'Hour'\n      }, {\n        name: 'day',\n        title: 'Day'\n      }, {\n        name: 'week',\n        title: 'Week'\n      }, {\n        name: 'month',\n        title: 'Month'\n      }, {\n        name: 'year',\n        title: 'Year'\n      }];\n      var _this$state = this.state,\n          meta = _this$state.meta,\n          query = _this$state.query,\n          chartType = _this$state.chartType;\n      return _objectSpread2({\n        meta: meta,\n        query: query,\n        validatedQuery: this.validatedQuery(),\n        isQueryPresent: this.isQueryPresent(),\n        chartType: chartType,\n        measures: (meta && query.measures || []).map(function (m, i) {\n          return _objectSpread2({\n            index: i\n          }, meta.resolveMember(m, 'measures'));\n        }),\n        dimensions: (meta && query.dimensions || []).map(function (m, i) {\n          return _objectSpread2({\n            index: i\n          }, meta.resolveMember(m, 'dimensions'));\n        }),\n        segments: (meta && query.segments || []).map(function (m, i) {\n          return _objectSpread2({\n            index: i\n          }, meta.resolveMember(m, 'segments'));\n        }),\n        timeDimensions: (meta && query.timeDimensions || []).map(function (m, i) {\n          return _objectSpread2({}, m, {\n            dimension: _objectSpread2({}, meta.resolveMember(m.dimension, 'dimensions'), {\n              granularities: granularities\n            }),\n            index: i\n          });\n        }),\n        filters: (meta && query.filters || []).map(function (m, i) {\n          return _objectSpread2({}, m, {\n            dimension: meta.resolveMember(m.dimension, ['dimensions', 'measures']),\n            operators: meta.filterOperatorsForMember(m.dimension, ['dimensions', 'measures']),\n            index: i\n          });\n        }),\n        availableMeasures: meta && meta.membersForQuery(query, 'measures') || [],\n        availableDimensions: meta && meta.membersForQuery(query, 'dimensions') || [],\n        availableTimeDimensions: (meta && meta.membersForQuery(query, 'dimensions') || []).filter(function (m) {\n          return m.type === 'time';\n        }),\n        availableSegments: meta && meta.membersForQuery(query, 'segments') || [],\n        updateMeasures: updateMethods('measures'),\n        updateDimensions: updateMethods('dimensions'),\n        updateSegments: updateMethods('segments'),\n        updateTimeDimensions: updateMethods('timeDimensions', toTimeDimension),\n        updateFilters: updateMethods('filters', toFilter),\n        updateChartType: function updateChartType(newChartType) {\n          return _this2.updateVizState({\n            chartType: newChartType\n          });\n        }\n      }, queryRendererProps);\n    }\n  }, {\n    key: \"updateQuery\",\n    value: function updateQuery(queryUpdate) {\n      var query = this.state.query;\n      this.updateVizState({\n        query: _objectSpread2({}, query, {}, queryUpdate)\n      });\n    }\n  }, {\n    key: \"updateVizState\",\n    value: function updateVizState(state) {\n      var _this$props2 = this.props,\n          setQuery = _this$props2.setQuery,\n          setVizState = _this$props2.setVizState;\n      var finalState = this.applyStateChangeHeuristics(state);\n      this.setState(finalState);\n      finalState = _objectSpread2({}, this.state, {}, finalState);\n\n      if (setQuery) {\n        setQuery(finalState.query);\n      }\n\n      if (setVizState) {\n        var _finalState = finalState,\n            meta = _finalState.meta,\n            toSet = _objectWithoutProperties(_finalState, [\"meta\"]);\n\n        setVizState(toSet);\n      }\n    }\n  }, {\n    key: \"validatedQuery\",\n    value: function validatedQuery() {\n      var query = this.state.query;\n      return _objectSpread2({}, query, {\n        filters: (query.filters || []).filter(function (f) {\n          return f.operator;\n        })\n      });\n    }\n  }, {\n    key: \"defaultHeuristics\",\n    value: function defaultHeuristics(newState) {\n      var _this$state2 = this.state,\n          query = _this$state2.query,\n          sessionGranularity = _this$state2.sessionGranularity;\n      var defaultGranularity = sessionGranularity || 'day';\n\n      if (newState.query) {\n        var oldQuery = query;\n        var newQuery = newState.query;\n        var meta = this.state.meta;\n\n        if ((oldQuery.timeDimensions || []).length === 1 && (newQuery.timeDimensions || []).length === 1 && newQuery.timeDimensions[0].granularity && oldQuery.timeDimensions[0].granularity !== newQuery.timeDimensions[0].granularity) {\n          newState = _objectSpread2({}, newState, {\n            sessionGranularity: newQuery.timeDimensions[0].granularity\n          });\n        }\n\n        if ((oldQuery.measures || []).length === 0 && (newQuery.measures || []).length > 0 || (oldQuery.measures || []).length === 1 && (newQuery.measures || []).length === 1 && oldQuery.measures[0] !== newQuery.measures[0]) {\n          var defaultTimeDimension = meta.defaultTimeDimensionNameFor(newQuery.measures[0]);\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: defaultTimeDimension ? [{\n              dimension: defaultTimeDimension,\n              granularity: defaultGranularity\n            }] : []\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            chartType: defaultTimeDimension ? 'line' : 'number'\n          });\n        }\n\n        if ((oldQuery.dimensions || []).length === 0 && (newQuery.dimensions || []).length > 0) {\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: (newQuery.timeDimensions || []).map(function (td) {\n              return _objectSpread2({}, td, {\n                granularity: undefined\n              });\n            })\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            chartType: 'table'\n          });\n        }\n\n        if ((oldQuery.dimensions || []).length > 0 && (newQuery.dimensions || []).length === 0) {\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: (newQuery.timeDimensions || []).map(function (td) {\n              return _objectSpread2({}, td, {\n                granularity: td.granularity || defaultGranularity\n              });\n            })\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            chartType: (newQuery.timeDimensions || []).length ? 'line' : 'number'\n          });\n        }\n\n        if (((oldQuery.dimensions || []).length > 0 || (oldQuery.measures || []).length > 0) && (newQuery.dimensions || []).length === 0 && (newQuery.measures || []).length === 0) {\n          newQuery = _objectSpread2({}, newQuery, {\n            timeDimensions: [],\n            filters: []\n          });\n          return _objectSpread2({}, newState, {\n            query: newQuery,\n            sessionGranularity: null\n          });\n        }\n\n        return newState;\n      }\n\n      if (newState.chartType) {\n        var newChartType = newState.chartType;\n\n        if ((newChartType === 'line' || newChartType === 'area') && (query.timeDimensions || []).length === 1 && !query.timeDimensions[0].granularity) {\n          var _query$timeDimensions = _slicedToArray(query.timeDimensions, 1),\n              td = _query$timeDimensions[0];\n\n          return _objectSpread2({}, newState, {\n            query: _objectSpread2({}, query, {\n              timeDimensions: [_objectSpread2({}, td, {\n                granularity: defaultGranularity\n              })]\n            })\n          });\n        }\n\n        if ((newChartType === 'pie' || newChartType === 'table' || newChartType === 'number') && (query.timeDimensions || []).length === 1 && query.timeDimensions[0].granularity) {\n          var _query$timeDimensions2 = _slicedToArray(query.timeDimensions, 1),\n              _td = _query$timeDimensions2[0];\n\n          return _objectSpread2({}, newState, {\n            query: _objectSpread2({}, query, {\n              timeDimensions: [_objectSpread2({}, _td, {\n                granularity: undefined\n              })]\n            })\n          });\n        }\n      }\n\n      return newState;\n    }\n  }, {\n    key: \"applyStateChangeHeuristics\",\n    value: function applyStateChangeHeuristics(newState) {\n      var _this$props3 = this.props,\n          stateChangeHeuristics = _this$props3.stateChangeHeuristics,\n          disableHeuristics = _this$props3.disableHeuristics;\n\n      if (disableHeuristics) {\n        return newState;\n      }\n\n      return stateChangeHeuristics && stateChangeHeuristics(this.state, newState) || this.defaultHeuristics(newState);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props4 = this.props,\n          cubejsApi = _this$props4.cubejsApi,\n          _render = _this$props4.render,\n          wrapWithQueryRenderer = _this$props4.wrapWithQueryRenderer;\n\n      if (wrapWithQueryRenderer) {\n        return React.createElement(QueryRenderer, {\n          query: this.validatedQuery(),\n          cubejsApi: cubejsApi,\n          render: function render(queryRendererProps) {\n            if (_render) {\n              return _render(_this3.prepareRenderProps(queryRendererProps));\n            }\n\n            return null;\n          }\n        });\n      } else {\n        if (_render) {\n          return _render(this.prepareRenderProps());\n        }\n\n        return null;\n      }\n    }\n  }]);\n\n  return QueryBuilder;\n}(React.Component);\nQueryBuilder.contextType = CubeContext;\nQueryBuilder.propTypes = {\n  render: func,\n  stateChangeHeuristics: func,\n  setQuery: func,\n  setVizState: func,\n  cubejsApi: object,\n  disableHeuristics: bool,\n  wrapWithQueryRenderer: bool,\n  query: object,\n  vizState: object\n};\nQueryBuilder.defaultProps = {\n  cubejsApi: null,\n  query: {},\n  setQuery: null,\n  setVizState: null,\n  stateChangeHeuristics: null,\n  disableHeuristics: false,\n  render: null,\n  wrapWithQueryRenderer: true,\n  vizState: {}\n};\n\nvar CubeProvider = function CubeProvider(_ref) {\n  var cubejsApi = _ref.cubejsApi,\n      children = _ref.children;\n  return React.createElement(CubeContext.Provider, {\n    value: {\n      cubejsApi: cubejsApi\n    }\n  }, children);\n};\n\nCubeProvider.propTypes = {\n  cubejsApi: object.isRequired,\n  children: any.isRequired\n};\n\nvar useCubeQuery = (function (query) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 1),\n      mutexObj = _useState2[0];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentQuery = _useState4[0],\n      setCurrentQuery = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      resultSet = _useState8[0],\n      setResultSet = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var context = useContext(CubeContext);\n  var subscribeRequest = null;\n  useEffect(function () {\n    function loadQuery() {\n      return _loadQuery.apply(this, arguments);\n    }\n\n    function _loadQuery() {\n      _loadQuery = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var cubejsApi;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(query && isQueryPresent(query))) {\n                  _context.next = 25;\n                  break;\n                }\n\n                if (!equals(currentQuery, query)) {\n                  setResultSet(null);\n                  setError(null);\n                  setCurrentQuery(query);\n                }\n\n                setLoading(true);\n                _context.prev = 3;\n\n                if (!subscribeRequest) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 7;\n                return subscribeRequest.unsubscribe();\n\n              case 7:\n                subscribeRequest = null;\n\n              case 8:\n                cubejsApi = options.cubejsApi || context && context.cubejsApi;\n\n                if (!options.subscribe) {\n                  _context.next = 13;\n                  break;\n                }\n\n                subscribeRequest = cubejsApi.subscribe(query, {\n                  mutexObj: mutexObj,\n                  mutexKey: 'query'\n                }, function (e, result) {\n                  setLoading(false);\n\n                  if (e) {\n                    setError(e);\n                  } else {\n                    setResultSet(result);\n                  }\n                });\n                _context.next = 19;\n                break;\n\n              case 13:\n                _context.t0 = setResultSet;\n                _context.next = 16;\n                return cubejsApi.load(query, {\n                  mutexObj: mutexObj,\n                  mutexKey: 'query'\n                });\n\n              case 16:\n                _context.t1 = _context.sent;\n                (0, _context.t0)(_context.t1);\n                setLoading(false);\n\n              case 19:\n                _context.next = 25;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t2 = _context[\"catch\"](3);\n                setError(_context.t2);\n                setLoading(false);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 21]]);\n      }));\n      return _loadQuery.apply(this, arguments);\n    }\n\n    loadQuery();\n    return function () {\n      if (subscribeRequest) {\n        subscribeRequest.unsubscribe();\n        subscribeRequest = null;\n      }\n    };\n  }, [JSON.stringify(query), options.cubejsApi, context]);\n  return {\n    isLoading: isLoading,\n    resultSet: resultSet,\n    error: error\n  };\n});\n\nexport { QueryRenderer, QueryRendererWithTotals, QueryBuilder, isQueryPresent, CubeProvider, useCubeQuery };\n"]},"metadata":{},"sourceType":"module"}